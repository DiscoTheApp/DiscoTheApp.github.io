<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
		<meta name="description" content="DISCO">
		<meta name="author" content="Tushar">

		<title>DISCO</title>

		<!-- Bootstrap core CSS -->
		<link href="bootstrap-3.3.7-dist/css/bootstrap.css" rel="stylesheet">
		<!-- Custom styles for this template -->
		<link href="jumbotron.css" rel="stylesheet">

		<!--Boostrap JS-->
		<link href="bootstrap-3.3.7-dist/js/bootstrap.js" rel="stylesheet">


		<!-- Firebase -->

		<script src="https://www.gstatic.com/firebasejs/3.7.0/firebase.js"></script>  
		<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-app.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-auth.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-database.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.6.10/firebase-messaging.js"></script>
		<script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-storage.js"></script>



		<!--JQuery-->


		<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
		<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
		<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

		<!--initialize Firebase & Check Login-->
		<script src="FirebaseStart.js"> </script>

	</head>


	<body  style = "background-color: #222">
		<nav class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand" href="Index.html"> DISCO </a>
					<form class="navbar-form navbar-left">
						<div class="form-group">
							<input type="text" class="form-control" style="width:300px" placeholder="Search">
						</div>
					</form>

				</div>
				<div class="navbar-right">
					<a class="navbar-brand" href="myMusic.html"> My Music </a>
					<a class="navbar-brand" href="myProfile.html" id= "navUsername" > Username</a> 
					<a class="navbar-brand" href="upload.html"> Post + </a>
				</div>
			</div>
		</nav>


		<!-- Type Select-->
		<div class="container">
			<div class="container" style="text-align: center; width: 100%; margin-top: 2%" >
			</div>

			<!--left side-->
			<div class="col-xs-6 col-md-4">
				<div class="square-large">

					<img  src="Images/coverArt.png" style="margin-bottom: 3%; max-width:100%; max-height: auto" onclick="startCoverUpload()" id="coverArt">

				</div>


				<button class="btn btn-primary" style="width: 100%; margin-top: 3%" onclick="startCoverUpload()"> Upload Cover Art</button> <br>
				<input type="text" class="formDetails-control" placeholder= "Post Caption" style="width: 100%; margin-top: 3%" id="inputCaption"> <br>

			</div>

			<!--right side-->
			<div class="col-xs-12 col-sm-6 col-md-8" style="background-color: #222"> 


				<!--single-->
				<div id="singleDiv" style="color: white">


					<form id="inputFields" >

						<input type="text" class="formDetails-control" placeholder="Song Name" style="width: 100%; height: 60px; font-size: 40px" id="inputSongName"> <br>

						<input type="text" class="formDetails-control" placeholder="@Usernames (Featured Artists)" style="width: 100%; margin-top:1%" id="inputFeatures"> <br>


						<input type="text" class="formDetails-control" placeholder="#Vibes (Recommended)" style="width: 100%" id="inputVibes" onfocus="loadFill()" onkeypress="saveVibes(event)"> <br>

						<button id="vibe1" type="button"  style=" margin-right: 1%" class="btn btn-default" onclick="click1()">   </button>
						<button id="vibe2" type="button"  style=" margin-right: 1%" class="btn btn-default" onclick="click2()">   </button>
						<button id="vibe3" type="button"  style=" margin-right: 1%" class="btn btn-default" onclick="click3()">   </button>
						<button id="vibe4" type="button"  style=" margin-right: 1%" class="btn btn-default" onclick="click4()">   </button>
						<button id="vibe5" type="button"  style=" margin-right: 1%" class="btn btn-default" onclick="click5()">   </button>

						<br>



						<!--                        <h4 id="postVibes" style=":none"></h4>-->





						<input type="checkbox" id="inputExplicit"  style="margin-top: 3%" value="true" > Explicit <br>

						<input type="file" id = "songFile" style="display: none;" accept="audio/*" onchange="handleSongSelect(this)"  /> 

						<input type="file" id = "coverFile" style="display: none;" accept="image/*" onchange="handleCoverSelect(this)" /> 

					</form>

					<button class="btn btn-primary" style="margin-top:3%;display: none;" onclick="startSongUpload()" id="uploadButton">+ Upload Song File </button> 
					<!--                      <button class="btn btn-primary" style="margin-top:3%;display: none; float: right" onclick="addTrack()" id="addTrackButton">+ Add Tracks </button> -->

				</div>

			</div>


		</div>

		<div class="container">
			<div id = "trackList" style="color: white; padding-left: 2%; padding-right: 2%; display: none" >

				<h1 style="text-align: center"><i>Album Preview</i></h1>
				<input type="text" class="formDetails-control" placeholder="Album Name" style="width: 100%; height: 60px; font-size: 40px" id="inputAlbumName"> <br>


				<h3 id="track1"></h3>  




			</div>
			<div id="publishBlock" class="container">

				<div style="float: left; width: 90%; margin-top:1% ">
					<div class="progress"  id = "progressDiv" style="display: none">
						<div class="progress-bar" role="progressbar" id ="uploadProgress" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:0%">

						</div>
					</div>
				</div>

				<div style="float: right; width: 10%">
					<button class="btn btn-primary btn-lg" id="publishButton" style="float:right" onclick="publish()">Publish</button>

				</div>

			</div>



		</div>


		<!--        END OF HTML   -->


		<script>

			// SHARED VARIABLES
			var songName, publicName, details,songFile,coverFile, vibeCount;
			var coverSelected = false;

			var timestamp = new Date();


			//DATA Arrays

			var position = 0;
			var postPosition = 0;
			var songDataArray, songFileArray,albumKeys,vibesArray, myVibesArray, unverifiedVibesArray;

			// USER DATA 

			var creator, userUsername, userUid, userPublicName, savedCreator;

			// HTML OBJECTS
			var uploadButton = document.getElementById('uploadButton');
			var uploadProgress = document.getElementById('uploadProgress');
			var publishBlock = document.getElementById('publishBlock');
			var addTrackButton = document.getElementById('addTrackButton');

			var artistNameId = document.getElementById('artistName');
			var inputSongName = document.getElementById('inputSongName');


			var trackList = document.getElementById("trackList");
			var track1 = document.getElementById("track1");

			var inputFields = document.getElementById("inputFields");

			var postVibes =  document.getElementById('postVibes');
			var inputVibes = document.getElementById('inputVibes');
			var inputFeatures = document.getElementById('inputFeatures');
			var inputExplicit = document.getElementById('inputExplicit');
			var inputCaption = document.getElementById('inputCaption');
			var inputAlbumName = document.getElementById('inputAlbumName');

		</script>
		<script src="main.js"></script>
		<script> 
			// ON LOAD EVENT LISTENERS 
			window.onload = 

				function() {    
				navbarName();

				inputSongName.addEventListener('input', nameExists,false);

				vibesRef.on('child_added', function(data) {
					vibesList(data.key)
				});
				newVibesRef.on('child_added', function(data) {
					unverifiedVibesList(data.key)
				});

			}
		</script>




	</body>

</html>